local UILibrary = {}

-- Function to create a frame
function UILibrary:CreateFrame(parent, name, position, size, color)
    local frame = Instance.new("Frame")
    frame.Name = name
    frame.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    frame.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    frame.BackgroundColor3 = color
    frame.Parent = parent
    return frame
end

-- Function to create a button
function UILibrary:CreateButton(parent, name, position, size, color, text, onClick)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    button.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    button.BackgroundColor3 = color
    button.Text = text
    button.Parent = parent
    button.MouseButton1Click:Connect(onClick)
    return button
end

-- Function to create a label
function UILibrary:CreateLabel(parent, name, position, size, color, text)
    local label = Instance.new("TextLabel")
    label.Name = name
    label.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    label.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    label.BackgroundColor3 = color
    label.Text = text
    label.Parent = parent
    return label
end

-- Function to create a textbox
function UILibrary:CreateTextBox(parent, name, position, size, color, placeholderText, onTextChanged)
    local textBox = Instance.new("TextBox")
    textBox.Name = name
    textBox.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    textBox.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    textBox.BackgroundColor3 = color
    textBox.PlaceholderText = placeholderText
    textBox.Parent = parent
    textBox.Changed:Connect(function(property)
        if property == "Text" then
            onTextChanged(textBox.Text)
        end
    end)
    return textBox
end

-- Function to create a slider
function UILibrary:CreateSlider(parent, name, position, size, color, min, max, onValueChanged)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Name = name
    sliderFrame.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    sliderFrame.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    sliderFrame.BackgroundColor3 = color
    sliderFrame.Parent = parent

    local sliderBar = Instance.new("Frame")
    sliderBar.Size = UDim2.new(1, 0, 0.2, 0)
    sliderBar.Position = UDim2.new(0, 0, 0.4, 0)
    sliderBar.BackgroundColor3 = Color3.new(0.6, 0.6, 0.6)
    sliderBar.Parent = sliderFrame

    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(0.1, 0, 1, 0)
    sliderButton.Position = UDim2.new(0, 0, 0, 0)
    sliderButton.BackgroundColor3 = Color3.new(1, 1, 1)
    sliderButton.Text = ""
    sliderButton.Parent = sliderBar

    local function updateSlider(input)
        local pos = UDim2.new(math.clamp((input.Position.X - sliderBar.AbsolutePosition.X) / sliderBar.AbsoluteSize.X, 0, 1), 0, 0, 0)
        sliderButton.Position = pos
        local value = math.floor(min + (max - min) * pos.X.Scale)
        onValueChanged(value)
    end

    sliderButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            updateSlider(input)
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    updateSlider(input)
                end
            end)
        end
    end)

    sliderButton.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)

    return sliderFrame
end

-- Function to create a checkbox
function UILibrary:CreateCheckBox(parent, name, position, size, color, onCheckChanged)
    local checkBoxFrame = Instance.new("Frame")
    checkBoxFrame.Name = name
    checkBoxFrame.Position = UDim2.new(position.X.Scale, position.X.Offset, position.Y.Scale, position.Y.Offset)
    checkBoxFrame.Size = UDim2.new(size.X.Scale, size.X.Offset, size.Y.Scale, size.Y.Offset)
    checkBoxFrame.BackgroundColor3 = color
    checkBoxFrame.Parent = parent

    local checkBox = Instance.new("TextButton")
    checkBox.Size = UDim2.new(0.8, 0, 0.8, 0)
    checkBox.Position = UDim2.new(0.1, 0, 0.1, 0)
    checkBox.BackgroundColor3 = Color3.new(1, 1, 1)
    checkBox.Text = ""
    checkBox.Parent = checkBoxFrame

    local isChecked = false

    checkBox.MouseButton1Click:Connect(function()
        isChecked = not isChecked
        checkBox.BackgroundColor3 = isChecked and Color3.new(0, 1, 0) or Color3.new(1, 1, 1)
        onCheckChanged(isChecked)
    end)

    return checkBoxFrame
end

return UILibrary

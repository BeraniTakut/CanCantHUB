-- GUI Library
local Library = {}
Library.__index = Library

function Library:CreateWindow(title)
    local window = {}
    window.Tabs = {}
    window.ScreenGui = Instance.new("ScreenGui")
    window.ScreenGui.Name = title
    window.ScreenGui.Parent = game.CoreGui

    window.MainFrame = Instance.new("Frame")
    window.MainFrame.Size = UDim2.new(0.3, 0, 0.5, 0)
    window.MainFrame.Position = UDim2.new(0.35, 0, 0.25, 0)
    window.MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    window.MainFrame.BackgroundTransparency = 0.1
    window.MainFrame.BorderSizePixel = 0
    window.MainFrame.Parent = window.ScreenGui

    window.UICorner = Instance.new("UICorner")
    window.UICorner.CornerRadius = UDim.new(0, 10)
    window.UICorner.Parent = window.MainFrame

    window.Title = Instance.new("TextLabel")
    window.Title.Size = UDim2.new(1, 0, 0.1, 0)
    window.Title.Position = UDim2.new(0, 0, 0, 0)
    window.Title.Text = title
    window.Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    window.Title.BackgroundTransparency = 1
    window.Title.Font = Enum.Font.GothamBold
    window.Title.TextSize = 24
    window.Title.Parent = window.MainFrame

    setmetatable(window, self)
    return window
end

function Library:CreateTab(name)
    local tab = {}
    tab.Name = name
    tab.Buttons = {}
    tab.Toggles = {}
    tab.Textboxes = {}
    tab.Dropdowns = {}
    tab.Sliders = {}
    tab.Keybinds = {}
    tab.ColorPickers = {}

    tab.TabButton = Instance.new("TextButton")
    tab.TabButton.Size = UDim2.new(0.1, 0, 0.1, 0)
    tab.TabButton.Position = UDim2.new(#self.Tabs * 0.1, 0, 0.1, 0)
    tab.TabButton.Text = name
    tab.TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tab.TabButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    tab.TabButton.BorderSizePixel = 0
    tab.TabButton.Font = Enum.Font.GothamBold
    tab.TabButton.TextSize = 14
    tab.TabButton.Parent = self.MainFrame

    table.insert(self.Tabs, tab)
    return tab
end

function Library:CreateButton(tab, name, callback)
    local button = {}
    button.Name = name

    button.Button = Instance.new("TextButton")
    button.Button.Size = UDim2.new(0.8, 0, 0.1, 0)
    button.Button.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    button.Button.Text = name
    button.Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    button.Button.BorderSizePixel = 0
    button.Button.Font = Enum.Font.GothamBold
    button.Button.TextSize = 14
    button.Button.Parent = self.MainFrame

    button.Button.MouseButton1Click:Connect(callback)

    table.insert(tab.Buttons, button)
    return button
end

function Library:CreateToggle(tab, name, callback)
    local toggle = {}
    toggle.Name = name
    toggle.State = false

    toggle.Button = Instance.new("TextButton")
    toggle.Button.Size = UDim2.new(0.8, 0, 0.1, 0)
    toggle.Button.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    toggle.Button.Text = name
    toggle.Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggle.Button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    toggle.Button.BorderSizePixel = 0
    toggle.Button.Font = Enum.Font.GothamBold
    toggle.Button.TextSize = 14
    toggle.Button.Parent = self.MainFrame

    toggle.Button.MouseButton1Click:Connect(function()
        toggle.State = not toggle.State
        callback(toggle.State)
        toggle.Button.Text = name .. (toggle.State and " [ON]" or " [OFF]")
    end)

    table.insert(tab.Toggles, toggle)
    return toggle
end

function Library:CreateTextbox(tab, name, callback)
    local textbox = {}
    textbox.Name = name

    textbox.TextLabel = Instance.new("TextLabel")
    textbox.TextLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
    textbox.TextLabel.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    textbox.TextLabel.Text = name
    textbox.TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textbox.TextLabel.BackgroundTransparency = 1
    textbox.TextLabel.Font = Enum.Font.GothamBold
    textbox.TextLabel.TextSize = 14
    textbox.TextLabel.Parent = self.MainFrame

    textbox.TextBox = Instance.new("TextBox")
    textbox.TextBox.Size = UDim2.new(0.8, 0, 0.1, 0)
    textbox.TextBox.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.32, 0)
    textbox.TextBox.Text = ""
    textbox.TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textbox.TextBox.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    textbox.TextBox.BorderSizePixel = 0
    textbox.TextBox.Font = Enum.Font.Gotham
    textbox.TextBox.TextSize = 14
    textbox.TextBox.Parent = self.MainFrame

    textbox.TextBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            callback(textbox.TextBox.Text)
        end
    end)

    table.insert(tab.Textboxes, textbox)
    return textbox
end

function Library:CreateDropdown(tab, name, options, callback)
    local dropdown = {}
    dropdown.Name = name
    dropdown.Options = options

    dropdown.TextLabel = Instance.new("TextLabel")
    dropdown.TextLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
    dropdown.TextLabel.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    dropdown.TextLabel.Text = name
    dropdown.TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    dropdown.TextLabel.BackgroundTransparency = 1
    dropdown.TextLabel.Font = Enum.Font.GothamBold
    dropdown.TextLabel.TextSize = 14
    dropdown.TextLabel.Parent = self.MainFrame

    dropdown.Selected = Instance.new("TextButton")
    dropdown.Selected.Size = UDim2.new(0.8, 0, 0.1, 0)
    dropdown.Selected.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.32, 0)
    dropdown.Selected.Text = options[1]
    dropdown.Selected.TextColor3 = Color3.fromRGB(255, 255, 255)
    dropdown.Selected.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    dropdown.Selected.BorderSizePixel = 0
    dropdown.Selected.Font = Enum.Font.Gotham
    dropdown.Selected.TextSize = 14
    dropdown.Selected.Parent = self.MainFrame

    dropdown.Frame = Instance.new("Frame")
    dropdown.Frame.Size = UDim2.new(0.8, 0, 0.1 * #options, 0)
    dropdown.Frame.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.42, 0)
    dropdown.Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    dropdown.Frame.BorderSizePixel = 0
    dropdown.Frame.Visible = false
    dropdown.Frame.Parent = self.MainFrame

    for i, option in ipairs(options) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 1 / #options, 0)
        button.Position = UDim2.new(0, 0, (i - 1) / #options, 0)
        button.Text = option
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        button.BorderSizePixel = 0
        button.Font = Enum.Font.Gotham
        button.TextSize = 14
        button.Parent = dropdown.Frame

        button.MouseButton1Click:Connect(function()
            dropdown.Selected.Text = option
            dropdown.Frame.Visible = false
            callback(option)
        end)
    end

    dropdown.Selected.MouseButton1Click:Connect(function()
        dropdown.Frame.Visible = not dropdown.Frame.Visible
    end)

    table.insert(tab.Dropdowns, dropdown)
    return dropdown
end

function Library:CreateSlider(tab, name, min, max, callback)
    local slider = {}
    slider.Name = name
    slider.Min = min
    slider.Max = max
    slider.Value = min

    slider.TextLabel = Instance.new("TextLabel")
    slider.TextLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
    slider.TextLabel.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    slider.TextLabel.Text = name
    slider.TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    slider.TextLabel.BackgroundTransparency = 1
    slider.TextLabel.Font = Enum.Font.GothamBold
    slider.TextLabel.TextSize = 14
    slider.TextLabel.Parent = self.MainFrame

    slider.SliderFrame = Instance.new("Frame")
    slider.SliderFrame.Size = UDim2.new(0.8, 0, 0.1, 0)
    slider.SliderFrame.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.32, 0)
    slider.SliderFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    slider.SliderFrame.BorderSizePixel = 0
    slider.SliderFrame.Parent = self.MainFrame

    slider.Slider = Instance.new("Frame")
    slider.Slider.Size = UDim2.new(0, 0, 1, 0)
    slider.Slider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    slider.Slider.Parent = slider.SliderFrame

    slider.SliderFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            local moveConnection
            moveConnection = game:GetService("UserInputService").InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement then
                    local newX = math.clamp((input.Position.X - slider.SliderFrame.AbsolutePosition.X) / slider.SliderFrame.AbsoluteSize.X, 0, 1)
                    slider.Slider.Size = UDim2.new(newX, 0, 1, 0)
                    slider.Value = math.floor(newX * (slider.Max - slider.Min) + slider.Min)
                    callback(slider.Value)
                end
            end)

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    moveConnection:Disconnect()
                end
            end)
        end
    end)

    table.insert(tab.Sliders, slider)
    return slider
end

function Library:CreateKeybind(tab, name, defaultKey, callback)
    local keybind = {}
    keybind.Name = name
    keybind.Key = defaultKey

    keybind.Button = Instance.new("TextButton")
    keybind.Button.Size = UDim2.new(0.8, 0, 0.1, 0)
    keybind.Button.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    keybind.Button.Text = name .. " [" .. tostring(defaultKey) .. "]"
    keybind.Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    keybind.Button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    keybind.Button.BorderSizePixel = 0
    keybind.Button.Font = Enum.Font.GothamBold
    keybind.Button.TextSize = 14
    keybind.Button.Parent = self.MainFrame

    keybind.Button.MouseButton1Click:Connect(function()
        keybind.Button.Text = name .. " [Press any key]"
        local inputConnection
        inputConnection = game:GetService("UserInputService").InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Keyboard then
                keybind.Key = input.KeyCode
                keybind.Button.Text = name .. " [" .. tostring(keybind.Key) .. "]"
                inputConnection:Disconnect()
            end
        end)
    end)

    game:GetService("UserInputService").InputBegan:Connect(function(input)
        if input.KeyCode == keybind.Key then
            callback()
        end
    end)

    table.insert(tab.Keybinds, keybind)
    return keybind
end

function Library:CreateColorPicker(tab, name, defaultColor, callback)
    local colorPicker = {}
    colorPicker.Name = name
    colorPicker.Color = defaultColor

    colorPicker.TextLabel = Instance.new("TextLabel")
    colorPicker.TextLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
    colorPicker.TextLabel.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.2, 0)
    colorPicker.TextLabel.Text = name
    colorPicker.TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    colorPicker.TextLabel.BackgroundTransparency = 1
    colorPicker.TextLabel.Font = Enum.Font.GothamBold
    colorPicker.TextLabel.TextSize = 14
    colorPicker.TextLabel.Parent = self.MainFrame

    colorPicker.ColorDisplay = Instance.new("TextButton")
    colorPicker.ColorDisplay.Size = UDim2.new(0.8, 0, 0.1, 0)
    colorPicker.ColorDisplay.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.32, 0)
    colorPicker.ColorDisplay.Text = ""
    colorPicker.ColorDisplay.BackgroundColor3 = defaultColor
    colorPicker.ColorDisplay.BorderSizePixel = 0
    colorPicker.ColorDisplay.Parent = self.MainFrame

    colorPicker.ColorDisplay.MouseButton1Click:Connect(function()
        local colorPickerFrame = Instance.new("Frame")
        colorPickerFrame.Size = UDim2.new(0.8, 0, 0.4, 0)
        colorPickerFrame.Position = UDim2.new(0.1, 0, (#tab.Buttons + #tab.Toggles + #tab.Textboxes + #tab.Dropdowns + #tab.Sliders + #tab.Keybinds + #tab.ColorPickers) * 0.12 + 0.42, 0)
        colorPickerFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        colorPickerFrame.BorderSizePixel = 0
        colorPickerFrame.Parent = self.MainFrame

        local colorPickerCloseButton = Instance.new("TextButton")
        colorPickerCloseButton.Size = UDim2.new(1, 0, 0.1, 0)
        colorPickerCloseButton.Position = UDim2.new(0, 0, 0.9, 0)
        colorPickerCloseButton.Text = "Close"
        colorPickerCloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        colorPickerCloseButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        colorPickerCloseButton.BorderSizePixel = 0
        colorPickerCloseButton.Font = Enum.Font.GothamBold
        colorPickerCloseButton.TextSize = 14
        colorPickerCloseButton.Parent = colorPickerFrame

        colorPickerCloseButton.MouseButton1Click:Connect(function()
            colorPickerFrame:Destroy()
        end)

        -- Color picker logic goes here

        callback(colorPicker.Color)
    end)

    table.insert(tab.ColorPickers, colorPicker)
    return colorPicker
end

function Library:Prompt(title, text, callback)
    local promptGui = Instance.new("ScreenGui")
    promptGui.Parent = game.CoreGui

    local promptFrame = Instance.new("Frame")
    promptFrame.Size = UDim2.new(0.3, 0, 0.2, 0)
    promptFrame.Position = UDim2.new(0.35, 0, 0.4, 0)
    promptFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    promptFrame.BackgroundTransparency = 0.1
    promptFrame.BorderSizePixel = 0
    promptFrame.Parent = promptGui

    local promptUICorner = Instance.new("UICorner")
    promptUICorner.CornerRadius = UDim.new(0, 10)
    promptUICorner.Parent = promptFrame

    local promptTitle = Instance.new("TextLabel")
    promptTitle.Size = UDim2.new(1, 0, 0.3, 0)
    promptTitle.Text = title
    promptTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    promptTitle.BackgroundTransparency = 1
    promptTitle.Font = Enum.Font.GothamBold
    promptTitle.TextSize = 20
    promptTitle.Parent = promptFrame

    local promptText = Instance.new("TextLabel")
    promptText.Size = UDim2.new(1, 0, 0.4, 0)
    promptText.Position = UDim2.new(0, 0, 0.3, 0)
    promptText.Text = text
    promptText.TextColor3 = Color3.fromRGB(255, 255, 255)
    promptText.BackgroundTransparency = 1
    promptText.Font = Enum.Font.Gotham
    promptText.TextSize = 14
    promptText.Parent = promptFrame

    local promptButton = Instance.new("TextButton")
    promptButton.Size = UDim2.new(0.8, 0, 0.2, 0)
    promptButton.Position = UDim2.new(0.1, 0, 0.7, 0)
    promptButton.Text = "OK"
    promptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    promptButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    promptButton.BorderSizePixel = 0
    promptButton.Font = Enum.Font.GothamBold
    promptButton.TextSize = 14
    promptButton.Parent = promptFrame

    promptButton.MouseButton1Click:Connect(function()
        promptGui:Destroy()
        if callback then callback() end
    end)
end

function Library:Notification(title, text, duration)
    local notificationGui = Instance.new("ScreenGui")
    notificationGui.Parent = game.CoreGui

    local notificationFrame = Instance.new("Frame")
    notificationFrame.Size = UDim2.new(0.3, 0, 0.1, 0)
    notificationFrame.Position = UDim2.new(0.35, 0, 0.1, 0)
    notificationFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    notificationFrame.BackgroundTransparency = 0.1
    notificationFrame.BorderSizePixel = 0
    notificationFrame.Parent = notificationGui

    local notificationUICorner = Instance.new("UICorner")
    notificationUICorner.CornerRadius = UDim.new(0, 10)
    notificationUICorner.Parent = notificationFrame

    local notificationTitle = Instance.new("TextLabel")
    notificationTitle.Size = UDim2.new(1, 0, 0.4, 0)
    notificationTitle.Text = title
    notificationTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    notificationTitle.BackgroundTransparency = 1
    notificationTitle.Font = Enum.Font.GothamBold
    notificationTitle.TextSize = 18
    notificationTitle.Parent = notificationFrame

    local notificationText = Instance.new("TextLabel")
    notificationText.Size = UDim2.new(1, 0, 0.6, 0)
    notificationText.Position = UDim2.new(0, 0, 0.4, 0)
    notificationText.Text = text
    notificationText.TextColor3 = Color3.fromRGB(255, 255, 255)
    notificationText.BackgroundTransparency = 1
    notificationText.Font = Enum.Font.Gotham
    notificationText.TextSize = 14
    notificationText.Parent = notificationFrame

    spawn(function()
        wait(duration or 3)
        notificationGui:Destroy()
    end)
end

function Library:Credit(name, description, link)
    local creditGui = Instance.new("ScreenGui")
    creditGui.Parent = game.CoreGui

    local creditFrame = Instance.new("Frame")
    creditFrame.Size = UDim2.new(0.3, 0, 0.1, 0)
    creditFrame.Position = UDim2.new(0.35, 0, 0.9, 0)
    creditFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    creditFrame.BackgroundTransparency = 0.1
    creditFrame.BorderSizePixel = 0
    creditFrame.Parent = creditGui

    local creditUICorner = Instance.new("UICorner")
    creditUICorner.CornerRadius = UDim.new(0, 10)
    creditUICorner.Parent = creditFrame

    local creditName = Instance.new("TextLabel")
    creditName.Size = UDim2.new(1, 0, 0.4, 0)
    creditName.Text = name
    creditName.TextColor3 = Color3.fromRGB(255, 255, 255)
    creditName.BackgroundTransparency = 1
    creditName.Font = Enum.Font.GothamBold
    creditName.TextSize = 18
    creditName.Parent = creditFrame

    local creditDescription = Instance.new("TextLabel")
    creditDescription.Size = UDim2.new(1, 0, 0.4, 0)
    creditDescription.Position = UDim2.new(0, 0, 0.4, 0)
    creditDescription.Text = description
    creditDescription.TextColor3 = Color3.fromRGB(255, 255, 255)
    creditDescription.BackgroundTransparency = 1
    creditDescription.Font = Enum.Font.Gotham
    creditDescription.TextSize = 14
    creditDescription.Parent = creditFrame

    local creditLink = Instance.new("TextButton")
    creditLink.Size = UDim2.new(1, 0, 0.2, 0)
    creditLink.Position = UDim2.new(0, 0, 0.8, 0)
    creditLink.Text = "Copy Link"
    creditLink.TextColor3 = Color3.fromRGB(255, 255, 255)
    creditLink.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    creditLink.BorderSizePixel = 0
    creditLink.Font = Enum.Font.GothamBold
    creditLink.TextSize = 14
    creditLink.Parent = creditFrame

    creditLink.MouseButton1Click:Connect(function()
        setclipboard(link)
    end)
end

return Library
